This is just for reference. We ended up using an existing library. \
However, designing this mapping ourselves deepened our understanding of the relevant parameters and constraints.